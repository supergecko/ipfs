(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/luckDraw/luckDraw"],{2449:function(t,e,a){"use strict";var n=a("4f47"),i=a.n(n);i.a},"4f47":function(t,e,a){},"87ba":function(t,e,a){"use strict";(function(t){a("981c"),a("921b");n(a("66fd"));var e=n(a("a3cc"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"8cf3":function(t,e,a){"use strict";a.r(e);var n=a("8dd6"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a},"8dd6":function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a("a34a")),o=a("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,a,n,i,o,r){try{var s=t[o](r),c=s.value}catch(u){return void a(u)}s.done?e(c):Promise.resolve(c).then(n,i)}function c(t){return function(){var e=this,a=arguments;return new Promise(function(n,i){var o=t.apply(e,a);function r(t){s(o,n,i,r,c,"next",t)}function c(t){s(o,n,i,r,c,"throw",t)}r(void 0)})}}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){l(t,e,a[e])})}return t}function l(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var d=a("89ca"),h={computed:u({},(0,o.mapState)(["hasLogin"])),data:function(){return{awardsList:{},lotteryTimes:0,isSignIn:!1,showMyPrize:!1,myPrizelist:[],showNoPrize:!1,showRule:!1,turntable:null,canvasWidth:0,canvasHeight:0,inLottery:!1,signin_status:0}},onLoad:function(){var e=this;t.getSystemInfo({success:function(t){e.canvasWidth=t.windowWidth-t.windowWidth/100*10,e.canvasHeight=t.windowWidth-t.windowWidth/100*10,console.log(n(t.model," at pages\\luckDraw\\luckDraw.vue:138")),console.log(n(t.pixelRatio," at pages\\luckDraw\\luckDraw.vue:139")),console.log(n(t.windowWidth," at pages\\luckDraw\\luckDraw.vue:140")),console.log(n(t.windowHeight," at pages\\luckDraw\\luckDraw.vue:141")),console.log(n(t.language," at pages\\luckDraw\\luckDraw.vue:142")),console.log(n(t.version," at pages\\luckDraw\\luckDraw.vue:143")),console.log(n(t.platform," at pages\\luckDraw\\luckDraw.vue:144")),e.initdata(),e._lotteryChance()}})},onReady:function(t){},onPullDownRefresh:function(){var e=c(i.default.mark(function e(){return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.initdata();case 2:t.stopPullDownRefresh();case 3:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}(),methods:{_lotteryChance:function(){var e=this,a=t.getStorageSync("userID"),n=Date.parse(new Date)/1e3,i=this.$md5("".concat(a,"__").concat(n,"__elseleimaohasjer2860")),o={user_id:a,timestamp:n,sign:i};this.$ajax.post({url:this.$service.api_lists.lotteryChance,data:o}).then(function(a){1==a.data.code&&(e.lotteryTimes=a.data.data.number,e.signin_status=a.data.data.signin_status),t.hideLoading()}).catch(function(e){t.hideLoading(),t.showToast({title:e,duration:2e3})})},_Signin:function(){if(this.hasLogin){var e=t.getStorageSync("userID"),a=Date.parse(new Date)/1e3,n=this.$md5("".concat(e,"__").concat(a,"__elseleimaohasjer2860")),i={user_id:e,timestamp:a,sign:n};this.$ajax.post({url:this.$service.api_lists.Signin,data:i}).then(function(e){1==e.data.code&&t.showToast({title:e.data.msg,icon:"none",duration:2e3}),t.hideLoading()}).catch(function(e){t.hideLoading(),t.showToast({title:e,duration:2e3})})}else t.reLaunch({url:"../login/loginPas"})},getMyPrize:function(){var t=this;t.$lotteryApi.myPrizeList().then(function(e){t.myPrizelist=e,t.showNoPrize=!0}).catch(function(){t.showNoPrize=!0})},showRuleDialog:function(){this.showRule=!0},hideRuleDialog:function(){this.showRule=!1},showMyPrizeDialog:function(){this.getMyPrize(),this.showMyPrize=!0},hideMyPrizeDialog:function(){this.showNoPrize=!1,this.showMyPrize=!1},initdata:function(){var e=this;t.showLoading({title:"加载中"});var a=Date.parse(new Date)/1e3,i=this.$md5("".concat(a,"__elseleimaohasjer2860")),o={timestamp:a,sign:i};this.$ajax.post({url:this.$service.api_lists.awardsList,data:o}).then(function(a){if(1==a.data.code){var i=e;i.isSignIn=a.data.data.signInStatus,i.awardsList=a.data.data.awardsList,console.log(n(i.awardsList," at pages\\luckDraw\\luckDraw.vue:268"));for(var o=[],r=0;r<i.awardsList.length;r++)o.push(i.awardsList[r].diskColor);var s=i.canvasWidth,c=s;i.turntable=d.wheelSurf("canvas",{$this:i,list:i.awardsList,width:s,height:c,outerCircle:{color:"#F95151"},innerCircle:{color:"#B33E0A"},dots:["#FBF0B0","#FFFFFF"],disk:["#FAFAFA","#BCF489","#EFB88E","#EBE993","#82E7D4","#19BD9F","#16B960"],title:{color:"#B14A29",font:"13px Arial",lineHeight:13}})}t.hideLoading()}).catch(function(e){t.hideLoading(),t.showToast({title:e,duration:2e3})})},playReward:function(){this.lottery(!1)},lottery:function(){var e=this;if(!e.inLottery){e.inLottery=!0;var a=360/e.awardsList.length,n=t.getStorageSync("userID"),i=Date.parse(new Date)/1e3,o=this.$md5("".concat(n,"__").concat(i,"__elseleimaohasjer2860")),r={user_id:n,timestamp:i,sign:o};this.$ajax.post({url:this.$service.api_lists.getAward,data:r}).then(function(n){if(1==n.data.code){e.lotteryTimes=n.data.data.times;var i=n.data.data.awards;if("undefined"==typeof i)t.showModal({title:"提示",content:"当前抽奖次数为0，是否使用10积分兑换一次抽奖机会？",success:function(t){t.confirm?(e.inLottery=!1,e.lottery(!0)):t.cancel&&(e.inLottery=!1)}});else{var o=0;for(var r in e.awardsList)if(e.awardsList.hasOwnProperty(r)){if(i.award_id==e.awardsList[r].award_id)break;o++}e.turntable.lottery(o*a+a/2,function(){e.inLottery=!1,t.showModal({title:"提示",showCancel:!1,content:i.winText,success:function(t){}})})}}t.hideLoading()}).catch(function(a){t.hideLoading(),t.showToast({title:a,duration:2e3}),e.inLottery=!1})}},signIn:function(){},mission:function(){},integralMall:function(){},backClick:function(){t.navigateBack()}}};e.default=h}).call(this,a("6e42")["default"],a("0de9")["default"])},a3cc:function(t,e,a){"use strict";a.r(e);var n=a("dced"),i=a("8cf3");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("2449");var r=a("2877"),s=Object(r["a"])(i["default"],n["a"],n["b"],!1,null,"63bf5935",null);e["default"]=s.exports},dced:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i})}},[["87ba","common/runtime","common/vendor"]]]);