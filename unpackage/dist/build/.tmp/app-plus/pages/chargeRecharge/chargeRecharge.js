(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chargeRecharge/chargeRecharge"],{"18fc":function(e,t,a){"use strict";var n=a("7acd"),i=a.n(n);i.a},3554:function(e,t,a){"use strict";(function(e){a("981c"),a("921b");n(a("66fd"));var t=n(a("6844"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},6844:function(e,t,a){"use strict";a.r(t);var n=a("d79f"),i=a("8b74");for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);a("18fc");var c=a("2877"),r=Object(c["a"])(i["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports},"7acd":function(e,t,a){},"8b74":function(e,t,a){"use strict";a.r(t);var n=a("abfa"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);t["default"]=i.a},abfa:function(e,t,a){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a("2f62");function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){c(e,t,a[t])})}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var r=function(){return a.e("components/uni-popup/uni-popup").then(a.bind(null,"942a"))},s={components:{uniPopup:r},computed:o({},(0,i.mapState)(["hasLogin"]),{captchaSrc:function(){return this.qrCodeUrl.replace(/[\r\n]/g,"")}}),onLoad:function(t){this.hasLogin?(this.order_electricity_id=t.order_electricity_id,this._buyElectricityDetail()):e.reLaunch({url:"../login/loginPas"})},data:function(){return{paymentName:"",paymentFlag:!0,electricityPay:[],electricityInfo:{},order_electricity_id:"",electricityDay:0,electricityDayFlag:!0,totalCase:0,electricityDayAll:[{dayText:"30天",day:30},{dayText:"60天",day:60},{dayText:"90天",day:90},{dayText:"120天",day:120},{dayText:"150天",day:150},{dayText:"180天",day:180}],pay_id:0,qrCodeUrl:"",unpaid:0,networkImgSrc:"",formLabelAlign:{bank_account:"",bank_name:"",bank_open:"",bank_title:""}}},methods:{handleDownloadQrIMg:function(t){e.showActionSheet({itemList:["保存到相册"],success:function(a){0==a.tapIndex&&(e.showLoading({title:"保存中..."}),setTimeout(function(){e.hideLoading()},6e3),e.downloadFile({url:t,success:function(t){200===t.statusCode&&e.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){e.hideLoading(),e.showToast({title:"保存成功！"})}})}}))}})},copyText:function(t){e.setClipboardData({data:t,success:function(){console.log(n("success"," at pages\\chargeRecharge\\chargeRecharge.vue:292"))}})},_buyElectricityDetail:function(){var t=this;e.getNetworkType({success:function(t){"none"==t.networkType&&e.showToast({icon:"none",title:"当前网络不可用"})}}),e.showLoading({title:"加载中"});var a=e.getStorageSync("userID"),i=this.order_electricity_id,o=Date.parse(new Date)/1e3,c=this.$md5("".concat(a,"__").concat(i,"__").concat(o,"__elseleimaohasjer2860")),r={user_id:a,order_electricity_id:i,timestamp:o,sign:c};this.$ajax.post({url:this.$service.api_lists.buyElectricityDetail,data:r}).then(function(a){1==a.data.code&&(t.electricityInfo=a.data.data.info,t.electricityPay=a.data.data.pay),e.hideLoading(),console.log(n(a," at pages\\chargeRecharge\\chargeRecharge.vue:333"))}).catch(function(t){e.hideLoading(),e.showToast({title:t,duration:2e3})})},_buyElectricityCost:function(){var t=this;if(""!==this.paymentName)if(0!==this.electricityDay){e.getNetworkType({success:function(t){"none"==t.networkType&&e.showToast({icon:"none",title:"当前网络不可用"})}}),e.showLoading({title:"购买中"});var a=e.getStorageSync("userID"),i=this.electricityDay,o=this.pay_id,c=this.order_electricity_id,r=Date.parse(new Date)/1e3,s=this.$md5("".concat(a,"__").concat(c,"__").concat(i,"__").concat(o,"__").concat(r,"__elseleimaohasjer2860")),l={user_id:a,order_electricity_id:c,buy_day:i,pay_id:o,timestamp:r,sign:s};this.$ajax.post({url:this.$service.api_lists.buyElectricityCost,data:l}).then(function(a){if(1==a.data.code)if(a.data.data.pay_type<3)t.qrCodeUrl=a.data.data.base64,t.networkImgSrc=a.data.data.qrcode,t.unpaid=a.data.data.unpaid,t.$refs.qrcode.open();else if(3===a.data.data.pay_type){e.showToast({icon:"none",title:"支付成功"});setTimeout(function(){e.reLaunch({url:"../myOrder/myOrder"})},1500)}else t.formLabelAlign.bank_account=a.data.data.address.bank_account,t.formLabelAlign.bank_name=a.data.data.address.bank_name,t.formLabelAlign.bank_open=a.data.data.address.bank_open,t.formLabelAlign.bank_title=a.data.data.address.bank_title,t.unpaid=a.data.data.unpaid,t.$refs.underLine.open();e.hideLoading(),console.log(n(a," at pages\\chargeRecharge\\chargeRecharge.vue:410"))}).catch(function(t){e.hideLoading(),e.showToast({title:t,duration:2e3})})}else e.showToast({icon:"none",title:"请选择电费缴纳天数"});else e.showToast({icon:"none",title:"请选择付款方式"})},toback:function(){e.navigateBack({delta:1})},openPopup4:function(){this.$refs.popup4.open()},closePopup4:function(e){this.$refs.popup4.close(),this.paymentFlag=!1,this.paymentName=e.name,this.pay_id=e.pay_id},openPopup2:function(){this.$refs.popup2.open()},closePopup2:function(e){this.$refs.popup2.close(),this.electricityDayFlag=!1,this.electricityDay=e.day},cancel:function(e){this.$refs[e].close()}},watch:{electricityDay:function(e,t){this.totalCase=parseFloat(e)*parseFloat(this.electricityInfo.electricity),this.totalCase=parseFloat(this.totalCase).toFixed(2)}}};t.default=s}).call(this,a("6e42")["default"],a("0de9")["default"])},d79f:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})}},[["3554","common/runtime","common/vendor"]]]);